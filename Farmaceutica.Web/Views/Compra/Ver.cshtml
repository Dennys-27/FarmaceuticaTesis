@using Farmaceutica.Core.DTOs
@model CompraVerViewModel
@{
    ViewData["Title"] = "Compra Mantenedor";
    Layout = "~/Views/Shared/_LayoutDashboard.cshtml";
}
<div class="row">
    <div class="col-12">
        <div class="page-title-box d-sm-flex align-items-center justify-content-between">
            <h4 class="mb-sm-0">Vista Compra</h4>
            <div class="page-title-right">
                <ol class="breadcrumb m-0">
                    <li class="breadcrumb-item"><a href="javascript: void(0);">Vista</a></li>
                    <li class="breadcrumb-item active">Compra</li>
                </ol>
            </div>
        </div>
    </div>
</div>


<div class="col-xxl-12">
    <div class="card" id="demo">
        <div class="row">
            <!-- Header con logo y datos de la empresa -->
            <div class="col-lg-12">
                <div class="card-header border-bottom-dashed p-4">
                    <div class="d-flex">
                        <div class="flex-grow-1">
                            <img src="~/images/logo.png" class="card-logo card-logo-dark" alt="logo dark" height="90" />
                            <img src="~/images/logo.png" class="card-logo card-logo-light" alt="logo light" height="90" />
                            <div class="mt-sm-5 mt-4">
                                <h6 class="text-muted text-uppercase fw-semibold">Dirección</h6>
                                <p class="text-muted mb-1">@Model.ProvDirecc</p>
                            </div>
                        </div>
                        <div class="flex-shrink-0 mt-sm-0 mt-3">
                            <h6><span class="text-muted fw-normal">RUC: </span>@Model.ProvRuc</h6>
                            <h6><span class="text-muted fw-normal">Email: </span>@Model.ProvCorreo</h6>
                            <h6><span class="text-muted fw-normal">Página Web: </span><a href="https://themesbrand.com/" class="link-primary" target="_blank">themesbrand.com</a></h6>
                            <h6 class="mb-0"><span class="text-muted fw-normal">Teléfono: </span>+593 9XXXXXXXX</h6>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Datos generales de la venta -->
            <div class="col-lg-12">
                <div class="card-body p-4">
                    <div class="row g-3">
                        <div class="col-lg-3 col-6">
                            <p class="text-muted mb-2 text-uppercase fw-semibold">Nro de Venta</p>
                            <h5 class="fs-14 mb-0">V-<span>@Model.CompraId</span></h5>
                        </div>
                        <div class="col-lg-3 col-6">
                            <p class="text-muted mb-2 text-uppercase fw-semibold">Fecha</p>
                            <h5 class="fs-14 mb-0">@Model.Fecha.ToString("dd/MM/yyyy")</h5>
                        </div>
                        <div class="col-lg-3 col-6">
                            <p class="text-muted mb-2 text-uppercase fw-semibold">Pago</p>
                            <span class="badge badge-soft-success fs-11">@Model.PagNom</span>
                        </div>
                        <div class="col-lg-3 col-6">
                            <p class="text-muted mb-2 text-uppercase fw-semibold">Total</p>
                            <h5 class="fs-14 mb-0">@Model.Total.ToString("C")</h5>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Datos del Cliente -->
            <div class="col-lg-12">
                <div class="card-body p-4 border-top border-top-dashed">
                    <h6 class="text-muted text-uppercase fw-semibold mb-3">Datos del Cliente</h6>
                    <p class="fw-medium mb-2">@Model.ProvNom</p>
                    <p class="fw-medium mb-2">@Model.ProvRuc</p>
                    <p class="fw-medium mb-2">@Model.ProvDirecc</p>
                    <p class="fw-medium mb-2">@Model.ProvCorreo</p>
                </div>
            </div>

            <!-- Datos de Usuario y Moneda -->
            <div class="col-lg-12">
                <div class="card-body p-4 border-top border-top-dashed">
                    <div class="row g-3">
                        <div class="col-6">
                            <h6 class="text-muted text-uppercase fw-semibold mb-3">Encargado</h6>
                            <p class="fw-medium mb-2">@Model.UsuNom</p>
                        </div>
                        <div class="col-6">
                            <h6 class="text-muted text-uppercase fw-semibold mb-3">Moneda</h6>
                            <p class="fw-medium mb-2">@Model.MonNom</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Detalle de productos -->
            <div class="col-lg-12">
                <div class="card-body p-4">
                    <div class="table-responsive">
                        <table class="table table-borderless text-center table-nowrap align-middle mb-0">
                            <thead>
                                <tr class="table-active">
                                    <th scope="col">Categoría</th>
                                    <th scope="col">Producto</th>
                                    <th scope="col" style="width: 50px;">Und</th>
                                    <th scope="col">P.Venta</th>
                                    <th scope="col">Cant.</th>
                                    <th scope="col" class="text-end">Total</th>
                                </tr>
                            </thead>
                            <tbody id="listdetalle">
                                @foreach (var det in Model.Detalles)
                                {
                                    <tr>
                                        <td>@det.Categoria</td>
                                        <td>@det.ProductoNombre</td>
                                        <td>@det.Unidad</td>
                                        <td>@det.PrecioUnitario.ToString("C")</td>
                                        <td>@det.Cantidad</td>
                                        <td class="text-end">@det.TotalCompra.ToString("C")</td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>

                    <!-- Totales -->
                    <div class="border-top border-top-dashed mt-2">
                        <table class="table table-borderless table-nowrap align-middle mb-0 ms-auto" style="width:250px">
                            <tbody>
                                <tr>
                                    <td>Sub Total</td>
                                    <td class="text-end" id="vent_subtotal">@Model.Subtotal.ToString("C")</td>
                                </tr>
                                <tr>
                                    <td>IGV (18%)</td>
                                    <td class="text-end" id="vent_igv">@Model.Igv.ToString("C")</td>
                                </tr>
                                <tr class="border-top border-top-dashed fs-15">
                                    <th scope="row">Total</th>
                                    <th class="text-end" id="vent_total">@Model.Total.ToString("C")</th>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- Comentario -->
                    <div class="mt-4">
                        <div class="alert alert-info">
                            <p class="mb-0"><span class="fw-semibold">Comentario:</span> <span id="vent_coment">@Model.Comentario</span></p>
                        </div>
                    </div>

                    <!-- Botón imprimir -->
                    <div class="hstack gap-2 justify-content-end d-print-none mt-4">
                        <a href="javascript:window.print()" class="btn btn-success"><i class="ri-printer-line align-bottom me-1"></i> Print</a>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>
