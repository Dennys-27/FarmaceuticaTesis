@using Farmaceutica.Core.Enums   // si tu enum está en esa carpeta
@using Farmaceutica.Core.Entities
@{
    ViewData["Title"] = "Venta Mantenedor";
    Layout = "~/Views/Shared/_LayoutDashboard.cshtml";
}

<!-- start page title -->
<div class="row">
    <div class="col-12">
        <div class="page-title-box d-sm-flex align-items-center justify-content-between">
            <h4 class="mb-sm-0">Mantenimiento Venta</h4>

            <div class="page-title-right">
                <ol class="breadcrumb m-0">
                    <li class="breadcrumb-item"><a href="javascript: void(0);">Venta</a></li>
                    <li class="breadcrumb-item active">Venta</li>
                </ol>
            </div>

        </div>
    </div>
    <!-- TODO Id de Venta -->
    <input type="hidden" name="vent_id" id="vent_id" />
    <div class="col-lg-12">
        <div class="card">
            <div class="card-header align-items-center d-flex">
                <h4 class="card-title mb-0 flex-grow-1">Proceso de Pago</h4>
            </div><!-- end card header -->
            <div class="card-body">
                <p class="text-muted">Seleccione correctamente el tipo de pago que desea realizar</p>
                <div class="live-preview">
                    <div class="row align-items-center g-3">
                        <div class="col-lg-4">
                            <label for="doc_id" class="form-label">Tipo de Documento</label>
                            <select type="text" class="form-control form-select" name="doc_id" id="doc_id" aria-label="Seleccionar">
                                <option value="0" selected>Seleccione</option>
                                <option value="1">Factura</option>
                                <option value="2">Boleta</option>
                                <option value="3">Nota de Crédito</option>
                                <option value="4">Nota de Débito</option>
                                <option value="5">Recibo</option>
                            </select>
                        </div>
                        <div class="col-lg-4">
                            <label for="pag_id" class="form-label">Tipo de Pago</label>
                            <select type="text" class="form-control form-select" name="pag_id" id="pag_id" aria-label="Seleccionar">
                                <option value="0" selected>Seleccione</option>
                                <option value="1">Efectivo</option>
                                <option value="2">Transferencia</option>
                                <option value="3">Cheque</option>
                            </select>
                        </div>
                        <div class="col-lg-4">
                            <label for="mon_id" class="form-label">Moneda</label>
                            <select type="text" class="form-control form-select" name="mon_id" id="mon_id" aria-label="Seleccionar">
                                <option value="0" selected>Seleccione</option>
                                <option value="1">Dolar</option>
                                <option value="2">Euro</option>                         
                            </select>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div> <!-- end col -->
    <div class="col-lg-12">
        <div class="card">
            <div class="card-header align-items-center d-flex">
                <h4 class="card-title mb-0 flex-grow-1">Datos del Cliente</h4>
                <button type="button" class="btn btn-primary btn-sm" id="btnNuevoCliente">
                    <i class="ri-user-add-line me-1"></i>Nuevo
                </button>
            </div><!-- end card header -->

            <div class="card-body">
                <p class="text-muted mb-4">Datos personales del cliente:</p>

                <div class="live-preview">
                    <div class="row align-items-center g-3">
                        <!-- Fila 1: Cliente y RUC -->
                        <div class="col-lg-8">
                            <label for="cli_id" class="form-label">Cliente</label>
                            <select type="text" class="form-control form-select" name="cli_id" id="cli_id" aria-label="Seleccionar">
                                <option value="0" selected>Seleccione cliente</option>
                                <!-- Opciones aquí -->
                            </select>
                        </div>

                        <div class="col-lg-4">
                            <label for="cli_ruc" class="form-label">Ruc</label>
                            <input type="text" class="form-control" id="cli_ruc" name="cli_ruc" placeholder="Ruc" readonly />
                        </div>

                        <!-- Fila 2: Dirección -->
                        <div class="col-12">
                            <label for="cli_direcc" class="form-label">Dirección</label>
                            <input type="text" class="form-control" id="cli_direcc" name="cli_direcc" placeholder="Dirección" readonly />
                        </div>

                        <!-- Fila 3: Correo y Teléfono -->
                        <div class="col-lg-6">
                            <label for="cli_correo" class="form-label">Correo</label>
                            <input type="text" class="form-control" id="cli_correo" name="cli_correo" placeholder="Correo" readonly />
                        </div>

                        <div class="col-lg-6">
                            <label for="cli_telf" class="form-label">Telefono</label>
                            <input type="text" class="form-control" id="cli_telf" name="cli_telf" placeholder="Telefono" readonly />
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div> <!-- end col -->
    <div class="col-lg-12">
        <div class="card">
            <div class="card-body">
                <p class="text-muted">Seleccione correctamente el proveedor para poder realizar con eficiencia en proceso de compra</p>
                
                <div class="live-preview">
                    <div class="row align-items-center g-3">
                        <div class="col-lg-3">
                            <label for="cat_id" class="form-label">Categoria</label>
                            <select type="text" class="form-control form-select" name="cat_id" id="cat_id" aria-label="Seleccionar">
                                <option value="0" selected>Seleccione</option>
                            </select>
                        </div>
                       
                        <div class="col-lg-3">
                            <label for="prod_id" class="form-label">Producto</label>
                            <select type="text" class="form-control form-select" name="prod_id" id="prod_id" aria-label="Seleccionar">
                                <option value="0" selected>Seleccione</option>
                            </select>
                        </div>
                        <div class="col-lg-3">
                            <div>
                                <label for="prod_codigo" class="form-label">Codigo Producto</label>
                                <input type="text" class="form-control" id="prod_codigo" name="prod_codigo" placeholder="Codigo" readonly/>
                            </div>
                        </div>
                        <div class="col-lg-3">
                            <div>
                                <label for="und_id" class="form-label">Unidad de Medida</label>
                                <select type="text" class="form-control form-select" name="un_id" id="und_id" aria-label="Seleccionar">
                                    <option value="0" selected>Seleccione</option>
                                    <option value="1">Unidad</option>
                                    <option value="2">Tableta</option>
                                    <option value="3">Caja</option>
                                    <option value="3">Tarro</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-lg-3">
                            <div>
                                <label for="prod_pventa" class="form-label">Precio</label>
                                <input type="number" class="form-control" id="prod_pventa" name="prod_pventa" placeholder="Precio" />
                            </div>
                        </div>
                        <div class="col-lg-3">
                            <div>
                                <label for="prod_stock" class="form-label">Stock</label>
                                <input type="text" class="form-control" id="prod_stock" name="prod_stock" placeholder="Stock" readonly />
                            </div>
                        </div>
                        <div class="col-lg-3">
                            <div>
                                <label for="detv_cant" class="form-label">Cantidad</label>
                                <input type="number" class="form-control" id="detv_cant" name="detv_cant" placeholder="Cantidad" />
                            </div>
                        </div>



                        <button type="button" id="btnagregar" class="btn btn-primary float-start"><i class="ri-shopping-cart-2-fill"></i> Nueva Compra</button>


                    </div>
                </div>
            </div>
        </div>
    </div> <!-- end col -->
    <div class="col-lg-12">
        <div class="card">
            <div class="card-header align-items-center d-flex">
                <h4 class="card-title mb-0 flex-grow-1">Detalle de Venta</h4>
            </div><!-- end card header -->
            <div class="card-body">
                <table id="table_data" class="table table-bordered dt-responsive nowrap table-striped align-middle" style="width:100%">
                    <thead>
                        <tr>
                            <th>Categoria</th>
                            <th>Producto</th>
                            <th>Unidad</th>
                            <th>Precio Venta</th>
                            <th>Cantidad</th>
                            <th>Total</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>
                <!-- TODO:Calculo Detalle -->
                <table class="table table-borderless table-nowrap align-middle mb-0 ms-auto" style="width:250px">
                    <tbody>
                        <tr>
                            <td>Sub Total</td>
                            <td class="text-end" id="txtsubtotal">0</td>
                        </tr>
                        <tr>
                            <td>IGV (18%)</td>
                            <td class="text-end" id="txtigv">0</td>
                        </tr>
                        <tr class="border-top border-top-dashed fs-15">
                            <th scope="row">Total</th>
                            <th class="text-end" id="txttotal">0</th>
                        </tr>
                    </tbody>
                </table>
                <div class="mt-4">
                    <label for="vent_coment" class="form-label text-muted text-uppercase fw-semibold">Comentario</label>
                    <textarea class="form-control alert alert-info" id="vent_coment" name="vent_coment" placeholder="Comentario" rows="4" required=""></textarea>
                </div>
                <div class="hstack gap-2 left-content-end d-print-none mt-4">
                    <button type="button" id="btnguardar" class="btn btn-success"><i class="ri-printer-line align-bottom me-1"></i> Guardar</button>
                    <a id="btnlimpiar" class="btn btn-warning"><i class="ri-send-plane-fill align-bottom me-1"></i> Limpiar</a>
                </div>
            </div>
        </div>
    </div> <!-- end col -->
</div>

@* modal de usuario *@
<div id="modalmantenimiento" class="modal fade" tabindex="-1" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="lbltitulo"></h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"> </button>
            </div>

            <form method="post" id="mantenimiento_form" enctype="multipart/form-data">
                <div class="modal-body">
                    <input type="hidden" name="Id" id="usu_id" />
                    <input type="hidden" name="Password" value="Farmacia123*">
                    <div class="row gy-2">
                        <div class="col-md-12">
                            <div>
                                <label class="form-label">Nombre Usuario</label>
                                <input type="text" class="form-control" id="usu_usu" name="UsuarioNombre" required />
                            </div>
                        </div>
                    </div>
                    <div class="row gy-2">
                        <div class="col-md-12">
                            <div>
                                <label class="form-label">Email</label>
                                <input type="email" class="form-control" id="usu_correo" name="Email" required />
                            </div>
                        </div>
                    </div>
                    <div class="row gy-2">
                        <div class="col-md-12">
                            <div>
                                <label class="form-label">Nombre</label>
                                <input type="text" class="form-control" id="usu_nom" name="Nombre" required />
                            </div>
                        </div>
                    </div>
                    <div class="row gy-2">
                        <div class="col-md-12">
                            <div>
                                <label class="form-label">Apellido</label>
                                <input type="text" class="form-control" id="usu_ape" name="Apellido" required />
                            </div>
                        </div>
                    </div>
                    <div class="row gy-2">
                        <div class="col-md-12">
                            <label class="form-label">Rol</label>
                            <select class="form-control form-select" name="Rol" id="rol_id">
                                <option value="">Seleccionar</option>
                                @foreach (var rol in Enum.GetValues(typeof(RolUsuario)))
                                {
                                    <option value="@((int)rol)">@rol</option>
                                }
                            </select>
                        </div>
                    </div>
                    <div class="row gy-2">
                        <div class="col-md-12">
                            <div>
                                <label class="form-label">Ruc</label>
                                <input type="text" class="form-control" id="usu_ruc" name="Ruc" required />
                            </div>
                        </div>
                    </div>
                    <div class="row gy-2">
                        <div class="col-md-12">
                            <div>
                                <label class="form-label">Telefono</label>
                                <input type="text" class="form-control" id="usu_telefono" name="Telefono" required />
                            </div>
                        </div>
                    </div>
                    <div class="row gy-2">
                        <div class="col-md-12">
                            <div>
                                <label class="form-label">Direccion</label>
                                <input type="text" class="form-control" id="usu_direccion" name="Direccion" required />
                            </div>
                        </div>
                    </div>
                    <div class="row gy-2">
                        <div class="col-md-12">
                            <div>
                                <label for="valueInput" class="form-label">Imagen</label>
                                <input type="file" class="form-control" id="usu_img" name="imagen" />
                            </div>
                        </div>
                    </div>

                    <br>

                    <div class="row gy-2">
                        <div class="col-md-12">
                            <div class="text-center">
                                <a id="btnremovephoto" class="btn btn-danger btn-icon waves-effect waves-light btn-sm"><i class="ri-delete-bin-5-line"></i></a>
                                <div class="profile-user position-relative d-inline-block mx-auto  mb-4">
                                    <span id="pre_imagen"></span>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
                <div class="modal-footer">
                    <button type="reset" class="btn btn-light" data-bs-dismiss="modal">Cerrar</button>
                    <button type="submit" class="btn btn-primary">Guardar</button>

                </div>
            </form>
        </div>
    </div>
</div>





@section Scripts {
    <script src="~/js/venta.js"></script>
}